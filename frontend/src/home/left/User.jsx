import React from 'react';
import useConversation from '../../stateManage/useConversation';
import { useSocketContext } from '../../context/SocketContext';

export const User = ({ user }) => {
  const { selectedConversation, setSelectedConversation } = useConversation();
  const isSelected = selectedConversation?._id === user._id;
  const { onlineUsers } = useSocketContext();
  const isOnline = onlineUsers.includes(user._id);

  return (
    <div
      className={`cursor-pointer rounded-lg ${
        isSelected ? 'bg-[#2A3942]' : 'hover:bg-[#202C33]'
      } transition-colors duration-300`}
      onClick={() => {
        setSelectedConversation(user);
      }}
    >
      <div className="flex items-center space-x-4 px-4 py-3">
        <div className={`relative w-12 h-12`}>
          <img className="rounded-full object-cover w-full h-full" src="data:image/jpeg;base64,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" />
          {isOnline && (
            <span className="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-[#111B21]"></span>
          )}
        </div>
        <div className="text-white">
          <h1 className="font-semibold">{user.name}</h1>
          <p className="text-sm text-gray-400">{user.email}</p>
        </div>
      </div>
    </div>
  );
};
